# ============================================
# Cloudflare Workers 配置示例
# ============================================
# 说明：
# 1. 复制此文件为 wrangler.toml
# 2. 替换所有占位符（YOUR_XXX）为实际值
# 3. 不要将包含真实 ID 和密钥的 wrangler.toml 提交到公开仓库

name = "duckov-mod-openannouncements-api"
main = "workers/src/index.ts"
compatibility_date = "2025-12-14"

# ============================================
# KV 命名空间配置
# ============================================
# 创建 KV 命名空间的命令：
#   pnpm wrangler kv namespace create ANNOUNCEMENTS_KV
#   pnpm wrangler kv namespace create ANNOUNCEMENTS_KV --preview
#
# 然后将返回的 ID 填入下方的 id 和 preview_id
kv_namespaces = [
  {
    binding = "ANNOUNCEMENTS_KV",
    id = "YOUR_PRODUCTION_KV_NAMESPACE_ID",      # 替换为生产环境的 KV Namespace ID
    preview_id = "YOUR_PREVIEW_KV_NAMESPACE_ID"  # 替换为预览环境的 KV Namespace ID
  }
]

# ============================================
# 环境变量
# ============================================
[vars]
# 初始化令牌：用于第一次启动时调用 /api/system/init 设置超级管理员账号
#
# 安全建议：
# 1. 本地开发：将此令牌放到 .dev.vars 文件中（不会被提交到 Git）
#    创建 .dev.vars 文件，内容：INIT_TOKEN=your_secure_random_token
#
# 2. 生产环境：使用 Cloudflare Secret（不要在配置文件中明文存储）
#    运行命令：pnpm wrangler secret put INIT_TOKEN
#    或在 Cloudflare Dashboard > Workers > Settings > Variables 中添加
#
# 生成安全令牌的方法：openssl rand -base64 32
INIT_TOKEN = "CHANGE_ME_TO_A_SECURE_RANDOM_STRING"

# ============================================
# 路由配置（可选）
# ============================================
# 如果需要绑定自定义域名，请取消注释并配置
# routes = [
#   { pattern = "api.yourdomain.com/*", zone_name = "yourdomain.com" }
# ]

# ============================================
# 其他配置（可选）
# ============================================
# account_id = "YOUR_CLOUDFLARE_ACCOUNT_ID"  # Cloudflare 账号 ID
# workers_dev = true                          # 是否使用 workers.dev 子域名
