<div align="center">

# Duckov Mod OpenAnnouncements

<p align="center">
  <img src="public/logo_light.jpg"/>
</p>

### é€ƒç¦»é¸­ç§‘å¤« Mod å…¬å‘Šç«™

[![React](https://img.shields.io/badge/React-18.2.0-61DAFB?style=flat-square&logo=react&logoColor=white)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8-3178C6?style=flat-square&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-6.2-646CFF?style=flat-square&logo=vite&logoColor=white)](https://vitejs.dev/)
[![MUI](https://img.shields.io/badge/MUI-7.3-007FFF?style=flat-square&logo=mui&logoColor=white)](https://mui.com/)
[![Cloudflare Workers](https://img.shields.io/badge/Cloudflare_Workers-F38020?style=flat-square&logo=cloudflare&logoColor=white)](https://workers.cloudflare.com/)

<p align="center">
  <img src="https://img.shields.io/badge/License-MIT-green?style=for-the-badge" alt="License"/>
  <img src="https://img.shields.io/badge/PRs-Welcome-brightgreen?style=for-the-badge" alt="PRs Welcome"/>
  <img src="https://img.shields.io/badge/Made%20with-Love-ff69b4?style=for-the-badge" alt="Made with Love"/>
</p>

<p align="center">
  <strong>ä¸€ä¸ªç°ä»£åŒ–çš„ Mod å…¬å‘Šå‘å¸ƒä¸ç®¡ç†å¹³å°</strong>
</p>

<p align="center">
  <a href="#-åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
  <a href="#-å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#-é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</a> â€¢
  <a href="#-api-æ–‡æ¡£">API æ–‡æ¡£</a> â€¢
  <a href="#-éƒ¨ç½²æŒ‡å—">éƒ¨ç½²æŒ‡å—</a>
</p>

---

</div>

## ğŸ“– é¡¹ç›®ç®€ä»‹

**Duckov Mod OpenAnnouncements** æ˜¯ä¸€ä¸ªä¸“ä¸ºæ¸¸æˆ Mod ç¤¾åŒºæ‰“é€ çš„å…¬å‘Šç®¡ç†ç³»ç»Ÿã€‚å®ƒæä¾›äº†å®Œæ•´çš„å…¬å‘Šå‘å¸ƒã€ç”¨æˆ·ç®¡ç†ã€æƒé™æ§åˆ¶å’Œ API é›†æˆåŠŸèƒ½ï¼Œæ”¯æŒ Web ç«¯å±•ç¤ºå’Œ Unity å®¢æˆ·ç«¯è¯»å–ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹©å®ƒï¼Ÿ

- ğŸš€ **ç°ä»£æŠ€æœ¯æ ˆ** - React 18 + TypeScript + Viteï¼Œæè‡´å¼€å‘ä½“éªŒ
- ğŸ¨ **ç²¾ç¾ UI** - Material-UI ç»„ä»¶åº“ï¼Œæ”¯æŒæµ…è‰²/æ·±è‰²ä¸»é¢˜
- ğŸ” **å®Œå–„æƒé™** - RBAC æƒé™æ¨¡å‹ï¼Œå¤šè§’è‰²ç²¾ç»†æ§åˆ¶
- â˜ï¸ **è¾¹ç¼˜éƒ¨ç½²** - Cloudflare Workers æ— æœåŠ¡å™¨æ¶æ„ï¼Œå…¨çƒåŠ é€Ÿ
- ğŸ”Œ **API å‹å¥½** - RESTful APIï¼Œæ”¯æŒ CI/CD è‡ªåŠ¨åŒ–æ¨é€

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

<table>
<tr>
<td width="50%">

### ğŸ“¢ å…¬å‘Šç®¡ç†
- å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆTiptapï¼‰
- ç‰ˆæœ¬å·æ™ºèƒ½æ’åº
- å¤šæ ¼å¼è¾“å‡ºï¼ˆHTML/çº¯æ–‡æœ¬ï¼‰
- å…¬å‘Šå±•å¼€/æŠ˜å é¢„è§ˆ

</td>
<td width="50%">

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- å¤šè§’è‰²æƒé™ï¼ˆSuper/Editor/Guestï¼‰
- Mod çº§åˆ«è®¿é—®æ§åˆ¶
- ç”¨æˆ·å¯ç”¨/åœç”¨
- å®‰å…¨å¯†ç é‡ç½®

</td>
</tr>
<tr>
<td width="50%">

### ğŸ® Mod ç®¡ç†
- åˆ›å»º/åˆ é™¤ Mod åˆ†ç±»
- æ‹–æ‹½æ’åº
- çµæ´»çš„ ID åˆ«ååŒ¹é…
- å¤š Mod ç‹¬ç«‹å…¬å‘Šæµ

</td>
<td width="50%">

### ğŸ”‘ API Key ç®¡ç†
- ç”Ÿæˆä¸“ç”¨ API å¯†é’¥
- é™å®š Mod è®¿é—®èŒƒå›´
- å¯†é’¥æ’¤é”€åŠŸèƒ½
- æ”¯æŒè‡ªåŠ¨åŒ–æ¨é€

</td>
</tr>
</table>

### ğŸ¨ ç•Œé¢é¢„è§ˆ

| æµ…è‰²ä¸»é¢˜ | æ·±è‰²ä¸»é¢˜ |
|:---:|:---:|
| æ¸…æ–°ç®€æ´çš„æ—¥é—´æ¨¡å¼ | æŠ¤çœ¼èˆ’é€‚çš„å¤œé—´æ¨¡å¼ |

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| React | 18.2.0 | UI æ¡†æ¶ |
| TypeScript | 5.8 | ç±»å‹å®‰å…¨ |
| Vite | 6.2 | æ„å»ºå·¥å…· |
| MUI | 7.3 | ç»„ä»¶åº“ |
| Tiptap | 3.13 | å¯Œæ–‡æœ¬ç¼–è¾‘ |
| Emotion | 11.14 | CSS-in-JS |

### åç«¯

| æŠ€æœ¯ | è¯´æ˜ |
|------|------|
| Cloudflare Workers | æ— æœåŠ¡å™¨è¿è¡Œæ—¶ |
| Workers KV | åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ |
| PBKDF2-SHA256 | å¯†ç åŠ å¯† |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18
- pnpm >= 8ï¼ˆæ¨èï¼‰

### æœ¬åœ°å¼€å‘ï¼ˆMock æ¨¡å¼ï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/duckov-mod-open-announcements.git
cd duckov-mod-open-announcements

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

> ğŸ’¡ Mock æ¨¡å¼ä¸‹ä¸éœ€è¦é…ç½® Cloudflareã€‚é¦–æ¬¡è®¿é—®éœ€è¦å®Œæˆ"ç³»ç»Ÿåˆå§‹åŒ–"åˆ›å»ºè¶…çº§ç®¡ç†å‘˜ã€‚
>
> å¦‚éœ€é¢„ç½®æ¼”ç¤ºè´¦å·ï¼Œåœ¨ `.env.local` ä¸­è®¾ç½® `VITE_MOCK_SEED_USERS=true`ã€‚

### æœ¬åœ°å¼€å‘ï¼ˆWorker + KVï¼‰

<details>
<summary>ğŸ“‹ ç‚¹å‡»å±•å¼€è¯¦ç»†æ­¥éª¤</summary>

#### 1. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local`:
```env
VITE_USE_MOCK_API=false
VITE_API_BASE_URL=http://127.0.0.1:8787
```

#### 2. é…ç½® Worker å¯†é’¥

åˆ›å»º `.dev.vars` æ–‡ä»¶ï¼ˆä¸è¦æäº¤åˆ° Gitï¼‰ï¼š
```env
INIT_TOKEN=your-secure-random-token
```

#### 3. é…ç½® KV å‘½åç©ºé—´

åœ¨ `wrangler.toml` ä¸­å¡«å†™ KV é…ç½®ï¼š
```toml
[[kv_namespaces]]
binding = "ANNOUNCEMENTS_KV"
id = "your-kv-namespace-id"
preview_id = "your-preview-kv-id"
```

#### 4. å¯åŠ¨æœåŠ¡

```bash
# ç»ˆç«¯ A - å¯åŠ¨ Worker
pnpm worker:dev

# ç»ˆç«¯ B - å¯åŠ¨å‰ç«¯
pnpm dev
```

#### 5. åˆå§‹åŒ–ç³»ç»Ÿ

```bash
curl -X POST http://127.0.0.1:8787/api/system/init \
  -H "Content-Type: application/json" \
  -H "X-Init-Token: your-secure-random-token" \
  -d '{
    "username": "admin",
    "password": "your-strong-password",
    "displayName": "ç³»ç»Ÿç®¡ç†å‘˜"
  }'
```

</details>

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
duckov-mod-open-announcements/
â”œâ”€â”€ ğŸ“‚ components/              # React ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“‚ admin/              # ç®¡ç†åŠŸèƒ½ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AdminTools.tsx     # ç®¡ç†å·¥å…·æ ‡ç­¾é¡µ
â”‚   â”‚   â”œâ”€â”€ ModManager.tsx     # Mod ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ UserManager.tsx    # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â””â”€â”€ ApiKeyManager.tsx  # API Key ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“‚ dashboard/          # ä»ªè¡¨ç›˜ç»„ä»¶
â”‚   â”‚   â””â”€â”€ AnnouncementsPanel.tsx
â”‚   â”œâ”€â”€ ğŸ“‚ layout/             # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ AnnouncementCard.tsx   # å…¬å‘Šå¡ç‰‡
â”‚   â””â”€â”€ Editor.tsx             # å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
â”‚
â”œâ”€â”€ ğŸ“‚ pages/                   # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Dashboard.tsx          # å…¬å‘Šåˆ—è¡¨é¡µ
â”‚   â””â”€â”€ Admin.tsx              # ç®¡ç†é¢æ¿
â”‚
â”œâ”€â”€ ğŸ“‚ services/                # API æœåŠ¡å±‚
â”‚   â”œâ”€â”€ apiService.ts          # ç»Ÿä¸€ API æ¥å£
â”‚   â””â”€â”€ mockDb.ts              # Mock æ•°æ®åº“
â”‚
â”œâ”€â”€ ğŸ“‚ workers/                 # Cloudflare Worker
â”‚   â””â”€â”€ src/index.ts           # Worker å…¥å£
â”‚
â”œâ”€â”€ ğŸ“‚ hooks/                   # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ ğŸ“‚ utils/                   # å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“‚ theme/                   # ä¸»é¢˜é…ç½®
â”‚
â”œâ”€â”€ App.tsx                    # åº”ç”¨å…¥å£
â”œâ”€â”€ types.ts                   # ç±»å‹å®šä¹‰
â””â”€â”€ constants.ts               # å¸¸é‡é…ç½®
```

---

## ğŸ“š API æ–‡æ¡£

### è®¤è¯

æ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£éœ€è¦åœ¨è¯·æ±‚å¤´æºå¸¦ Tokenï¼š

```http
Authorization: Bearer <token>
```

### å…¬å¼€æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| `GET` | `/api/public/list?modId=xxx` | è·å–å…¬å‘Šåˆ—è¡¨ |
| `GET` | `/api/mod/list` | è·å– Mod åˆ—è¡¨ |

### è®¤è¯æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| `POST` | `/api/auth/login` | ç”¨æˆ·ç™»å½• | - |
| `POST` | `/api/admin/post` | åˆ›å»ºå…¬å‘Š | Editor+ |
| `POST` | `/api/admin/update` | æ›´æ–°å…¬å‘Š | Editor+ |
| `POST` | `/api/admin/delete` | åˆ é™¤å…¬å‘Š | Super |

### ç®¡ç†æ¥å£

| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| `POST` | `/api/mod/create` | åˆ›å»º Mod | Super |
| `POST` | `/api/mod/delete` | åˆ é™¤ Mod | Super |
| `GET` | `/api/user/list` | ç”¨æˆ·åˆ—è¡¨ | Super |
| `POST` | `/api/user/create` | åˆ›å»ºç”¨æˆ· | Super |
| `POST` | `/api/apikey/create` | åˆ›å»º API Key | Editor+ |

<details>
<summary>ğŸ“‹ å®Œæ•´ API ç«¯ç‚¹åˆ—è¡¨</summary>

```
POST   /api/system/init          # ç³»ç»Ÿåˆå§‹åŒ–
POST   /api/auth/login           # ç™»å½•
POST   /api/auth/change-password # ä¿®æ”¹å¯†ç 

GET    /api/mod/list             # Mod åˆ—è¡¨
POST   /api/mod/create           # åˆ›å»º Mod
POST   /api/mod/delete           # åˆ é™¤ Mod
POST   /api/mod/reorder          # æ’åº Mod

GET    /api/user/list            # ç”¨æˆ·åˆ—è¡¨
POST   /api/user/create          # åˆ›å»ºç”¨æˆ·
POST   /api/user/delete          # åˆ é™¤ç”¨æˆ·
POST   /api/user/update          # æ›´æ–°ç”¨æˆ·
POST   /api/user/set-status      # è®¾ç½®çŠ¶æ€
POST   /api/user/reset-password  # é‡ç½®å¯†ç 

GET    /api/public/list          # å…¬å‘Šåˆ—è¡¨
POST   /api/admin/post           # åˆ›å»ºå…¬å‘Š
POST   /api/admin/update         # æ›´æ–°å…¬å‘Š
POST   /api/admin/delete         # åˆ é™¤å…¬å‘Š

GET    /api/apikey/list          # API Key åˆ—è¡¨
POST   /api/apikey/create        # åˆ›å»º API Key
POST   /api/apikey/revoke        # æ’¤é”€ API Key
```

</details>

---

## ğŸ” æƒé™æ¨¡å‹

ç³»ç»Ÿé‡‡ç”¨ RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰æ¨¡å‹ï¼š

| è§’è‰² | ä»£ç  | Mod ç®¡ç† | ç”¨æˆ·ç®¡ç† | å…¬å‘Šç¼–è¾‘ | è¯´æ˜ |
|------|------|:---:|:---:|:---:|------|
| **è¶…çº§ç®¡ç†å‘˜** | `super` | âœ… | âœ… | âœ… å…¨éƒ¨ | å®Œå…¨æ§åˆ¶æƒé™ |
| **ç¼–è¾‘** | `editor` | âŒ | âŒ | âœ… æˆæƒçš„ | ä»…å¯ç¼–è¾‘è¢«æˆæƒçš„ Mod |
| **è®¿å®¢** | `guest` | âŒ | âŒ | âŒ | åªè¯»è®¿é—® |

---

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### éƒ¨ç½²åˆ° Cloudflare Workers

```bash
# 1. ç™»å½• Cloudflare
wrangler login

# 2. åˆ›å»º KV å‘½åç©ºé—´
wrangler kv:namespace create "ANNOUNCEMENTS_KV"

# 3. é…ç½® wrangler.toml ä¸­çš„ KV ID

# 4. è®¾ç½®ç”Ÿäº§å¯†é’¥
wrangler secret put INIT_TOKEN

# 5. éƒ¨ç½²
pnpm worker:deploy
```

### æ„å»ºå‰ç«¯

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# é¢„è§ˆæ„å»ºç»“æœ
pnpm preview
```

---

## ğŸ“ å¼€å‘è„šæœ¬

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `pnpm dev` | å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ |
| `pnpm build` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬ |
| `pnpm preview` | é¢„è§ˆç”Ÿäº§æ„å»º |
| `pnpm typecheck` | TypeScript ç±»å‹æ£€æŸ¥ |
| `pnpm worker:dev` | å¯åŠ¨ Worker å¼€å‘æœåŠ¡å™¨ |
| `pnpm worker:deploy` | éƒ¨ç½² Worker åˆ°ç”Ÿäº§ç¯å¢ƒ |
| `pnpm check` | å®Œæ•´æ£€æŸ¥ï¼ˆç±»å‹ + æ„å»ºï¼‰ |

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚

---

<div align="center">

**å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®æœ‰ç”¨ï¼Œè¯·ç»™å®ƒä¸€ä¸ª â­ï¸**

Made with â¤ï¸ by Guducat

</div>
